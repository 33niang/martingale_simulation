# C语言 & OpenMP 并行模拟马丁格尔策略 (Martingale Strategy Parallel Simulator)

这是一个使用C语言和OpenMP构建的高性能并行计算程序，用于模拟经典的马丁格尔（Martingale）赌博策略。通过大规模的蒙特卡洛模拟，本项目旨在探究在拥有有限资本的情况下，马丁格尔策略的长期胜率和破产风险。

**➡️ [点击此处查看模拟结果与分析](RESULTS.md)**

## ✨ 主要功能

* **高性能**: 基于C语言实现，并针对计算密集型任务进行了优化。
* **并行计算**: 利用 OpenMP 实现了多核并行处理，能够充分利用现代CPU的多核性能，极大缩短大规模模拟的计算时间。
* **线程安全**: 内置了线程安全的伪随机数生成器，并为每个线程提供高质量的独立种子。
* **大规模模拟支持**: 核心计数变量使用 `long long` 类型，支持超过“二十一亿”次的海量模拟。
* **统计学可靠性**: 修复了伪随机数生成器(LCG)的常见低位比特陷阱，确保了公平的概率判断。
* **动态进度条**: 在控制台实时显示模拟进度，提供了良好的用户交互体验。

## 📝 代码健壮性说明

本项目在开发过程中解决了几个关键问题，以确保模拟结果的准确性和程序的稳定性：

1.  **大数支持**: 项目中所有与模拟次数相关的计数器（`num_simulations`, `win_count`, `loss_count`, 循环变量 `i`）均使用 `long long` 类型，这使得程序可以轻松处理远超21亿次的模拟，避免了整数溢出风险。
2.  **高质量随机性**: 修复了并行环境中随机数种子过于接近的问题。更重要的是，修正了仅依赖 LCG 随机数“最低位”进行概率判断的严重缺陷，改为比较随机数与其中间值的大小，从而利用了质量更高的“高位”信息，保证了真正的 50/50 概率。

## 🚀 如何编译和运行

### 方式一：使用 IDE (推荐 CLion)

1.  克隆本仓库到本地。
2.  使用 CLion 打开项目文件夹。
3.  CLion 会自动加载 `CMakeLists.txt` 并配置好项目。
4.  为了获得最佳性能，请将右上角的构建配置从 `Debug` 切换到 `Release`。
5.  点击绿色的 ▶️ “运行”按钮即可。

### 方式二：使用命令行 (GCC/Clang)

1.  克隆本仓库并进入项目目录。
2.  使用以下命令进行编译（开启最高优化 `-O3` 并启用 OpenMP `-fopenmp`）：
    ```bash
    gcc -O3 -fopenmp main.c -o martingale_simulator
    ```
3.  运行生成的可执行文件：
    ```bash
    # Windows
    .\martingale_simulator.exe
    # Linux / macOS
    ./martingale_simulator
    ```

## 📄 许可证

本项目采用 [MIT 许可证](LICENSE) 授权。
